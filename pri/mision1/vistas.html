<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Programacion Intermedio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../../css/estilos.css">
</head>
    <body>
        <div class="container">
    <!-- Diapositiva 1: Introducción a las vistas -->
<div class="slide">
  <h1>Vistas en MySQL</h1>
  <p>
    Una <strong>vista</strong> es una tabla virtual que se crea a partir de una o varias tablas
    mediante una consulta SQL. Permite simplificar consultas complejas,
    mejorar la seguridad y reutilizar código.
  </p>
</div>

<!-- Diapositiva 2: Ventajas de usar vistas -->
<div class="slide">
  <h2>Ventajas de las Vistas</h2>
  <ul>
    <li>Ocultan la complejidad de las consultas.</li>
    <li>Mejoran la seguridad: se puede limitar el acceso a ciertas columnas o filas.</li>
    <li>Facilitan la reutilización de consultas frecuentes.</li>
    <li>Permiten presentar datos combinados de varias tablas.</li>
  </ul>
</div>

<!-- Diapositiva 3: Estructura de la base de datos tienda -->
<div class="slide">
  <h2>Ejemplo con Base de Datos <code>tienda</code></h2>
  <p>
    En la base de datos <code>tienda</code> tenemos tablas como
    <strong>productos</strong>, <strong>clientes</strong>, <strong>ventas</strong> y
    <strong>detalle_ventas</strong>. Usaremos estas tablas para crear vistas
    que resuman información.
  </p>
</div>

<!-- Diapositiva 4: Crear una vista -->
<div class="slide">
  <h2>Crear una Vista</h2>
  <p>La sintaxis básica es:</p>
  <pre>
CREATE VIEW nombre_vista AS
SELECT columnas
FROM tablas
WHERE condiciones;
  </pre>
</div>

<!-- Diapositiva 5: Vista de productos con stock bajo -->
<div class="slide">
  <h2>Ejemplo 1: Productos con stock bajo</h2>
  <p>Podemos crear una vista que muestre solo los productos con existencias menores a 10:</p>
  <pre>
CREATE VIEW vista_stock_bajo AS
SELECT id_producto, nombre, stock
FROM productos
WHERE stock &lt; 10;
  </pre>
  <p>Consulta:</p>
  <pre>SELECT * FROM vista_stock_bajo;</pre>
</div>

<!-- Diapositiva 6: Vista de ventas por cliente -->
<div class="slide">
  <h2>Ejemplo 2: Ventas totales por cliente</h2>
  <p>Una vista que calcule el total de compras por cada cliente:</p>
  <pre>
CREATE VIEW vista_ventas_clientes AS
SELECT c.nombre AS cliente,
       SUM(v.total) AS total_compras
FROM clientes c
JOIN ventas v ON c.id_cliente = v.id_cliente
GROUP BY c.nombre;
  </pre>
  <p>Consulta:</p>
  <pre>SELECT * FROM vista_ventas_clientes ORDER BY total_compras DESC;</pre>
</div>

<!-- Diapositiva 7: Actualización de vistas -->
<div class="slide">
  <h2>Actualización de Vistas</h2>
  <p>
    Algunas vistas permiten <strong>actualización</strong> (INSERT, UPDATE, DELETE) si
    cumplen ciertas condiciones (una sola tabla, sin funciones de agregación, etc.).
  </p>
  <pre>
-- Actualizar datos a través de una vista simple
UPDATE vista_stock_bajo
SET stock = 20
WHERE id_producto = 3;
  </pre>
</div>

<!-- Diapositiva 8: Eliminación de una vista -->
<div class="slide">
  <h2>Eliminar una Vista</h2>
  <p>Si ya no se necesita una vista, se puede eliminar con:</p>
  <pre>DROP VIEW IF EXISTS vista_stock_bajo;</pre>
</div>

<!-- Diapositiva 9: Conclusiones -->
<div class="slide">
  <h2>Conclusión</h2>
  <p>
    Las vistas son herramientas poderosas para simplificar consultas,
    proteger datos y facilitar reportes en MySQL.
  </p>
</div>


        <div class="nav">
            <button onclick="prevSlide()">Anterior</button>
            <button onclick="nextSlide()">Siguiente</button>
        </div>
    </div>
    <script src="../../js/slide.js"></script>
    </body>
</html>
